
# Web Service Integration Guide (웹 서비스 연동 가이드)

When you select **"Web Service"** as the AI Provider in settings, the eXbuilder6 AI Studio sends a HTTP POST request to your configured Endpoint URL. Your backend server must process this request and return a specifically formatted JSON response.

## 1. Request Specification (Client → Server)

The application sends the user's prompt and current generation settings.

- **Method**: `POST`
- **Headers**:
  - `Content-Type`: `application/json`
  - `Authorization`: `Bearer {API_KEY}` (Only if API Key is entered in settings)

### Request Body Schema

```json
{
  "prompt": "String - The text description entered by the user",
  "settings": {
    "temperature": "Number - Creativity level (0.0 to 1.0)",
    "language": "String - 'ko' (Korean) or 'en' (English)",
    "includeComments": "Boolean - Whether to include verbose comments",
    "basePackage": "String - Java base package (e.g., 'com.example')",
    "modelName": "String - (Optional) Model identifier if configured"
  }
}
```

### Request Example

```json
{
  "prompt": "Create a user search form with name input and a search button.",
  "settings": {
    "temperature": 0.7,
    "language": "ko",
    "includeComments": true,
    "basePackage": "com.mycompany.erp",
    "modelName": ""
  }
}
```

---

## 2. Response Specification (Server → Client)

Your server **MUST** return a JSON object matching the structure below. If the structure is invalid, the application will throw an error.

### Response Body Schema

```json
{
  "clxCode": "String - The complete XML content for the .clx file",
  "jsCode": "String - The complete JavaScript content for the .js file",
  "javaFiles": [
    {
      "fileName": "String - File name including extension (e.g. UserRequest.java)",
      "packagePath": "String - Full package path",
      "content": "String - Complete Java source code",
      "type": "String - One of: 'controller', 'service', 'model'"
    }
  ],
  "logs": [
    "String - Log message 1",
    "String - Log message 2"
  ],
  "explanation": "String - A summary or explanation of the generated code (Markdown supported)",
  "previewMock": "String - (Optional) HTML string with inline CSS to visually mimic the UI"
}
```

### Response Example

```json
{
  "clxCode": "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<html xmlns=\"http://www.w3.org/1999/xhtml\"...>",
  "jsCode": "exports.onButtonClick = function(e) { ... };",
  "javaFiles": [
    {
      "fileName": "UserSearchController.java",
      "packagePath": "com.mycompany.erp.resource.complex.user.controller",
      "content": "package com.mycompany.erp.resource.complex.user.controller;\n\n@RestController...",
      "type": "controller"
    },
    {
      "fileName": "UserDTO.java",
      "packagePath": "com.mycompany.erp.resource.complex.user.model",
      "content": "package com.mycompany.erp.resource.complex.user.model;\n\n@Data...",
      "type": "model"
    }
  ],
  "logs": [
    "Analyzing prompt requirements...",
    "Detected search pattern.",
    "Generating Spring Boot controller structure."
  ],
  "explanation": "## Build Complete\nGenerated a standard search layout with a corresponding Spring Boot backend. The controller maps to `/api/users/search`.",
  "previewMock": "<div style='display:flex; gap:10px; padding:20px; border:1px solid #ccc;'><input type='text' placeholder='User Name' style='padding:5px;' /><button style='padding:5px 15px; background:blue; color:white;'>Search</button></div>"
}
```
